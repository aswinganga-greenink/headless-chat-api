============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0
rootdir: /home/aswin-ganga/headless-chat
configfile: pyproject.toml
plugins: anyio-4.12.1, asyncio-1.3.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1 item

tests/test_messaging.py F                                                [100%]

=================================== FAILURES ===================================
_____________________ test_conversation_flow_and_messaging _____________________
Traceback (most recent call last):
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/runner.py", line 353, in from_call
    result: TResult | None = func()
                             ^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/runner.py", line 245, in <lambda>
    lambda: runtest_hook(item=item, **kwds),
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 167, in _multicall
    raise exception
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/logging.py", line 850, in pytest_runtest_call
    yield
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/capture.py", line 900, in pytest_runtest_call
    return (yield)
            ^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/skipping.py", line 268, in pytest_runtest_call
    return (yield)
            ^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/runner.py", line 179, in pytest_runtest_call
    item.runtest()
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py", line 469, in runtest
    super().runtest()
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/python.py", line 1720, in runtest
    self.ihook.pytest_pyfunc_call(pyfuncitem=self)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_hooks.py", line 512, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 167, in _multicall
    raise exception
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 139, in _multicall
    teardown.throw(exception)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 53, in run_old_style_hookwrapper
    return result.get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_result.py", line 103, in get_result
    raise exc.with_traceback(tb)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 38, in run_old_style_hookwrapper
    res = yield
          ^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pluggy/_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/_pytest/python.py", line 166, in pytest_pyfunc_call
    result = testfunction(**testargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/pytest_asyncio/plugin.py", line 716, in inner
    runner.run(coro, context=context)
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/tests/test_messaging.py", line 91, in test_conversation_flow_and_messaging
    del_succ = await async_client.delete(f"/api/v1/conversations/{conv_id}/messages/{msg_id}", headers=h1)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1966, in delete
    return await self.request(
           ^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/httpx/_transports/asgi.py", line 170, in handle_async_request
    await self.app(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/applications.py", line 1134, in __call__
    await super().__call__(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/routing.py", line 119, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/routing.py", line 105, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/routing.py", line 424, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/fastapi/routing.py", line 312, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/src/modules/messages/router.py", line 68, in delete_message
    return await service.soft_delete_message(conversation_id, str(current_user.id), message_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/src/modules/messages/service.py", line 138, in soft_delete_message
    "message_id": str(message.id),
                      ^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 569, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1096, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/attributes.py", line 1126, in _fire_loader_callables
    return state._load_expired(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 828, in _load_expired
    self.manager.expired_attribute_loader(self, toload, passive)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 1674, in load_scalar_attributes
    result = load_on_ident(
             ^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 510, in load_on_ident
    return load_on_pk_identity(
           ^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 695, in load_on_pk_identity
    session.execute(
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2366, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 182, in execute
    self._adapt_connection._handle_exception(error)
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 342, in _handle_exception
    raise error
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/dialects/sqlite/aiosqlite.py", line 159, in execute
    _cursor: AsyncIODBAPICursor = self.await_(self._connection.cursor())  # type: ignore[arg-type] # noqa: E501
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
---------------------------- Captured stdout setup -----------------------------
2026-02-22 22:27:35,307 - asyncio - DEBUG - Using selector: EpollSelector
2026-02-22 22:27:35,308 - asyncio - DEBUG - Using selector: EpollSelector
2026-02-22 22:27:35,313 - aiosqlite - DEBUG - executing <function connect.<locals>.connector at 0x7612bf0f1440>
2026-02-22 22:27:35,314 - aiosqlite - DEBUG - operation <function connect.<locals>.connector at 0x7612bf0f1440> completed
2026-02-22 22:27:35,314 - aiosqlite - DEBUG - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x7612bf225d00>, deterministic=True)
2026-02-22 22:27:35,315 - aiosqlite - DEBUG - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x7612bf225d00>, deterministic=True) completed
2026-02-22 22:27:35,317 - aiosqlite - DEBUG - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'floor', 1, <built-in function floor>, deterministic=True)
2026-02-22 22:27:35,318 - aiosqlite - DEBUG - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2026-02-22 22:27:35,318 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,319 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,319 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112c40>, 'PRAGMA read_uncommitted', [])
2026-02-22 22:27:35,319 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112c40>, 'PRAGMA read_uncommitted', []) completed
2026-02-22 22:27:35,319 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112c40>)
2026-02-22 22:27:35,320 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112c40>) completed
2026-02-22 22:27:35,320 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112c40>)
2026-02-22 22:27:35,320 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112c40>) completed
2026-02-22 22:27:35,321 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,321 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,322 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,323 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,323 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112b40>, 'PRAGMA main.table_info("users")', ())
2026-02-22 22:27:35,323 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112b40>, 'PRAGMA main.table_info("users")', ()) completed
2026-02-22 22:27:35,324 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112b40>)
2026-02-22 22:27:35,324 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112b40>) completed
2026-02-22 22:27:35,324 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112b40>)
2026-02-22 22:27:35,325 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112b40>) completed
2026-02-22 22:27:35,325 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,326 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,326 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf111640>, 'PRAGMA temp.table_info("users")', ())
2026-02-22 22:27:35,326 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf111640>, 'PRAGMA temp.table_info("users")', ()) completed
2026-02-22 22:27:35,327 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf111640>)
2026-02-22 22:27:35,327 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf111640>) completed
2026-02-22 22:27:35,327 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf111640>)
2026-02-22 22:27:35,327 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf111640>) completed
2026-02-22 22:27:35,328 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,328 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,328 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112d40>, 'PRAGMA main.table_info("conversations")', ())
2026-02-22 22:27:35,329 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112d40>, 'PRAGMA main.table_info("conversations")', ()) completed
2026-02-22 22:27:35,329 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112d40>)
2026-02-22 22:27:35,329 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112d40>) completed
2026-02-22 22:27:35,330 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112d40>)
2026-02-22 22:27:35,330 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112d40>) completed
2026-02-22 22:27:35,330 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,330 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,331 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112dc0>, 'PRAGMA temp.table_info("conversations")', ())
2026-02-22 22:27:35,331 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112dc0>, 'PRAGMA temp.table_info("conversations")', ()) completed
2026-02-22 22:27:35,331 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112dc0>)
2026-02-22 22:27:35,332 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112dc0>) completed
2026-02-22 22:27:35,332 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112dc0>)
2026-02-22 22:27:35,332 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112dc0>) completed
2026-02-22 22:27:35,333 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,333 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,333 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112ec0>, 'PRAGMA main.table_info("conversation_participants")', ())
2026-02-22 22:27:35,333 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112ec0>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
2026-02-22 22:27:35,334 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112ec0>)
2026-02-22 22:27:35,334 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112ec0>) completed
2026-02-22 22:27:35,335 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112ec0>)
2026-02-22 22:27:35,335 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112ec0>) completed
2026-02-22 22:27:35,336 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,336 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,336 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112f40>, 'PRAGMA temp.table_info("conversation_participants")', ())
2026-02-22 22:27:35,337 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112f40>, 'PRAGMA temp.table_info("conversation_participants")', ()) completed
2026-02-22 22:27:35,337 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112f40>)
2026-02-22 22:27:35,337 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112f40>) completed
2026-02-22 22:27:35,337 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112f40>)
2026-02-22 22:27:35,338 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112f40>) completed
2026-02-22 22:27:35,338 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,338 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,339 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113040>, 'PRAGMA main.table_info("messages")', ())
2026-02-22 22:27:35,339 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113040>, 'PRAGMA main.table_info("messages")', ()) completed
2026-02-22 22:27:35,341 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113040>)
2026-02-22 22:27:35,341 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113040>) completed
2026-02-22 22:27:35,343 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113040>)
2026-02-22 22:27:35,343 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113040>) completed
2026-02-22 22:27:35,344 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,344 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,344 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1130c0>, 'PRAGMA temp.table_info("messages")', ())
2026-02-22 22:27:35,344 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1130c0>, 'PRAGMA temp.table_info("messages")', ()) completed
2026-02-22 22:27:35,345 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1130c0>)
2026-02-22 22:27:35,345 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1130c0>) completed
2026-02-22 22:27:35,345 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1130c0>)
2026-02-22 22:27:35,345 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1130c0>) completed
2026-02-22 22:27:35,346 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,347 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,347 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1132c0>, 'PRAGMA main.table_info("users")', ())
2026-02-22 22:27:35,347 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1132c0>, 'PRAGMA main.table_info("users")', ()) completed
2026-02-22 22:27:35,348 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1132c0>)
2026-02-22 22:27:35,348 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1132c0>) completed
2026-02-22 22:27:35,348 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1132c0>)
2026-02-22 22:27:35,348 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1132c0>) completed
2026-02-22 22:27:35,349 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,349 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,349 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113340>, 'PRAGMA temp.table_info("users")', ())
2026-02-22 22:27:35,350 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113340>, 'PRAGMA temp.table_info("users")', ()) completed
2026-02-22 22:27:35,350 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113340>)
2026-02-22 22:27:35,350 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113340>) completed
2026-02-22 22:27:35,350 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113340>)
2026-02-22 22:27:35,351 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113340>) completed
2026-02-22 22:27:35,351 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,352 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,353 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113440>, 'PRAGMA main.table_info("conversations")', ())
2026-02-22 22:27:35,353 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113440>, 'PRAGMA main.table_info("conversations")', ()) completed
2026-02-22 22:27:35,353 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113440>)
2026-02-22 22:27:35,354 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113440>) completed
2026-02-22 22:27:35,354 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113440>)
2026-02-22 22:27:35,354 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113440>) completed
2026-02-22 22:27:35,355 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,355 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,355 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1134c0>, 'PRAGMA temp.table_info("conversations")', ())
2026-02-22 22:27:35,356 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1134c0>, 'PRAGMA temp.table_info("conversations")', ()) completed
2026-02-22 22:27:35,356 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1134c0>)
2026-02-22 22:27:35,356 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1134c0>) completed
2026-02-22 22:27:35,356 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1134c0>)
2026-02-22 22:27:35,357 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1134c0>) completed
2026-02-22 22:27:35,357 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,357 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,358 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1135c0>, 'PRAGMA main.table_info("conversation_participants")', ())
2026-02-22 22:27:35,358 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1135c0>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
2026-02-22 22:27:35,358 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1135c0>)
2026-02-22 22:27:35,358 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1135c0>) completed
2026-02-22 22:27:35,359 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1135c0>)
2026-02-22 22:27:35,359 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1135c0>) completed
2026-02-22 22:27:35,359 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,359 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,360 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113640>, 'PRAGMA temp.table_info("conversation_participants")', ())
2026-02-22 22:27:35,360 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113640>, 'PRAGMA temp.table_info("conversation_participants")', ()) completed
2026-02-22 22:27:35,360 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113640>)
2026-02-22 22:27:35,361 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113640>) completed
2026-02-22 22:27:35,361 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113640>)
2026-02-22 22:27:35,361 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113640>) completed
2026-02-22 22:27:35,362 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,362 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,363 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1137c0>, 'PRAGMA main.table_info("messages")', ())
2026-02-22 22:27:35,363 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1137c0>, 'PRAGMA main.table_info("messages")', ()) completed
2026-02-22 22:27:35,363 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1137c0>)
2026-02-22 22:27:35,364 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1137c0>) completed
2026-02-22 22:27:35,364 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1137c0>)
2026-02-22 22:27:35,364 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1137c0>) completed
2026-02-22 22:27:35,364 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,365 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,365 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1138c0>, 'PRAGMA temp.table_info("messages")', ())
2026-02-22 22:27:35,365 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1138c0>, 'PRAGMA temp.table_info("messages")', ()) completed
2026-02-22 22:27:35,366 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1138c0>)
2026-02-22 22:27:35,367 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1138c0>) completed
2026-02-22 22:27:35,367 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1138c0>)
2026-02-22 22:27:35,367 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1138c0>) completed
2026-02-22 22:27:35,372 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,372 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,372 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113140>, '\nCREATE TABLE users (\n\tid UUID NOT NULL, \n\temail VARCHAR NOT NULL, \n\tusername VARCHAR NOT NULL, \n\thashed_password VARCHAR NOT NULL, \n\tis_active BOOLEAN, \n\tis_superuser BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2026-02-22 22:27:35,418 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113140>, '\nCREATE TABLE users (\n\tid UUID NOT NULL, \n\temail VARCHAR NOT NULL, \n\tusername VARCHAR NOT NULL, \n\thashed_password VARCHAR NOT NULL, \n\tis_active BOOLEAN, \n\tis_superuser BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2026-02-22 22:27:35,419 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113140>)
2026-02-22 22:27:35,419 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113140>) completed
2026-02-22 22:27:35,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,420 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113740>, 'CREATE UNIQUE INDEX ix_users_username ON users (username)', ())
2026-02-22 22:27:35,464 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113740>, 'CREATE UNIQUE INDEX ix_users_username ON users (username)', ()) completed
2026-02-22 22:27:35,464 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113740>)
2026-02-22 22:27:35,465 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113740>) completed
2026-02-22 22:27:35,465 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,465 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,466 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113940>, 'CREATE UNIQUE INDEX ix_users_email ON users (email)', ())
2026-02-22 22:27:35,509 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113940>, 'CREATE UNIQUE INDEX ix_users_email ON users (email)', ()) completed
2026-02-22 22:27:35,510 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113940>)
2026-02-22 22:27:35,510 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113940>) completed
2026-02-22 22:27:35,511 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,512 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,512 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1133c0>, '\nCREATE TABLE conversations (\n\tid UUID NOT NULL, \n\ttitle VARCHAR, \n\tis_group BOOLEAN, \n\tis_archived BOOLEAN NOT NULL, \n\tcreator_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(creator_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n', ())
2026-02-22 22:27:35,554 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1133c0>, '\nCREATE TABLE conversations (\n\tid UUID NOT NULL, \n\ttitle VARCHAR, \n\tis_group BOOLEAN, \n\tis_archived BOOLEAN NOT NULL, \n\tcreator_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(creator_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n', ()) completed
2026-02-22 22:27:35,555 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1133c0>)
2026-02-22 22:27:35,555 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1133c0>) completed
2026-02-22 22:27:35,556 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,556 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,556 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113840>, '\nCREATE TABLE messages (\n\tid UUID NOT NULL, \n\tconversation_id UUID NOT NULL, \n\tsender_id UUID NOT NULL, \n\tcontent VARCHAR, \n\tmessage_type VARCHAR, \n\tmedia_url VARCHAR, \n\tis_deleted BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(sender_id) REFERENCES users (id) ON DELETE CASCADE\n)\n\n', ())
2026-02-22 22:27:35,600 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113840>, '\nCREATE TABLE messages (\n\tid UUID NOT NULL, \n\tconversation_id UUID NOT NULL, \n\tsender_id UUID NOT NULL, \n\tcontent VARCHAR, \n\tmessage_type VARCHAR, \n\tmedia_url VARCHAR, \n\tis_deleted BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(sender_id) REFERENCES users (id) ON DELETE CASCADE\n)\n\n', ()) completed
2026-02-22 22:27:35,601 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113840>)
2026-02-22 22:27:35,601 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113840>) completed
2026-02-22 22:27:35,602 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,602 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,602 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10bc0>, 'CREATE INDEX ix_messages_conversation_id_created_at_desc ON messages (conversation_id, created_at DESC)', ())
2026-02-22 22:27:35,645 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10bc0>, 'CREATE INDEX ix_messages_conversation_id_created_at_desc ON messages (conversation_id, created_at DESC)', ()) completed
2026-02-22 22:27:35,646 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10bc0>)
2026-02-22 22:27:35,648 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10bc0>) completed
2026-02-22 22:27:35,649 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,649 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,650 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113540>, '\nCREATE TABLE conversation_participants (\n\tconversation_id UUID NOT NULL, \n\tuser_id UUID NOT NULL, \n\trole VARCHAR, \n\tis_active BOOLEAN NOT NULL, \n\tlast_seen_message_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (conversation_id, user_id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(last_seen_message_id) REFERENCES messages (id) ON DELETE SET NULL\n)\n\n', ())
2026-02-22 22:27:35,692 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113540>, '\nCREATE TABLE conversation_participants (\n\tconversation_id UUID NOT NULL, \n\tuser_id UUID NOT NULL, \n\trole VARCHAR, \n\tis_active BOOLEAN NOT NULL, \n\tlast_seen_message_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (conversation_id, user_id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(last_seen_message_id) REFERENCES messages (id) ON DELETE SET NULL\n)\n\n', ()) completed
2026-02-22 22:27:35,693 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113540>)
2026-02-22 22:27:35,693 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113540>) completed
2026-02-22 22:27:35,694 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,694 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,695 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:35,695 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:35,696 - asyncio - DEBUG - Using selector: EpollSelector
2026-02-22 22:27:35,699 - passlib.handlers.argon2 - DEBUG - detected 'argon2_cffi' backend, version '25.1.0', with support for 0x13 argon2 hashes
2026-02-22 22:27:36,002 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,002 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,002 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10440>, 'INSERT INTO users (id, email, username, hashed_password, is_active, is_superuser, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?) RETURNING created_at, id', ('6d946ca0db1b4cf28b18fc9ef869465d', 'test1@example.com', 'testuser1', '$argon2id$v=19$m=65536,t=3,p=4$c06pFQKAsPYeI0QI4VzLmQ$65YDaTkFKIlRa55VLxIyRzJShM0EGOSNh8TfZk6H/DA', 1, 0, None, '039d85ea818e4eec913cd09ac5e818fa', 'test2@example.com', 'testuser2', '$argon2id$v=19$m=65536,t=3,p=4$ybmXsjaGkNI657zXWqsV4g$jnsWU+3OlIKag0JyBsP+8JSmf0DpOfSpkh5w8ndwCWY', 1, 0, None))
2026-02-22 22:27:36,003 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10440>, 'INSERT INTO users (id, email, username, hashed_password, is_active, is_superuser, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?) RETURNING created_at, id', ('6d946ca0db1b4cf28b18fc9ef869465d', 'test1@example.com', 'testuser1', '$argon2id$v=19$m=65536,t=3,p=4$c06pFQKAsPYeI0QI4VzLmQ$65YDaTkFKIlRa55VLxIyRzJShM0EGOSNh8TfZk6H/DA', 1, 0, None, '039d85ea818e4eec913cd09ac5e818fa', 'test2@example.com', 'testuser2', '$argon2id$v=19$m=65536,t=3,p=4$ybmXsjaGkNI657zXWqsV4g$jnsWU+3OlIKag0JyBsP+8JSmf0DpOfSpkh5w8ndwCWY', 1, 0, None)) completed
2026-02-22 22:27:36,003 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee10440>)
2026-02-22 22:27:36,003 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee10440>) completed
2026-02-22 22:27:36,004 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10440>)
2026-02-22 22:27:36,004 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10440>) completed
2026-02-22 22:27:36,005 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,049 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,050 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,050 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,053 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-02-22 22:27:36,053 - python_multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2026-02-22 22:27:36,053 - python_multipart.multipart - DEBUG - Calling on_field_data with data[9:18]
2026-02-22 22:27:36,053 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-02-22 22:27:36,054 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-02-22 22:27:36,054 - python_multipart.multipart - DEBUG - Calling on_field_name with data[19:27]
2026-02-22 22:27:36,054 - python_multipart.multipart - DEBUG - Calling on_field_data with data[28:32]
2026-02-22 22:27:36,054 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-02-22 22:27:36,054 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-02-22 22:27:36,062 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,062 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,063 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee782c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser1',))
2026-02-22 22:27:36,063 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee782c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser1',)) completed
2026-02-22 22:27:36,063 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee782c0>)
2026-02-22 22:27:36,063 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee782c0>) completed
2026-02-22 22:27:36,064 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee782c0>)
2026-02-22 22:27:36,064 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee782c0>) completed
2026-02-22 22:27:36,066 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,067 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,067 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee78bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser1',))
2026-02-22 22:27:36,067 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee78bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser1',)) completed
2026-02-22 22:27:36,067 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee78bc0>)
2026-02-22 22:27:36,067 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee78bc0>) completed
2026-02-22 22:27:36,068 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee78bc0>)
2026-02-22 22:27:36,068 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee78bc0>) completed
2026-02-22 22:27:36,218 - httpx - INFO - HTTP Request: POST http://test/api/v1/auth/login/access-token "HTTP/1.1 200 OK"
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_name with data[0:8]
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_data with data[9:18]
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_start with no data
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_name with data[19:27]
2026-02-22 22:27:36,219 - python_multipart.multipart - DEBUG - Calling on_field_data with data[28:32]
2026-02-22 22:27:36,220 - python_multipart.multipart - DEBUG - Calling on_field_end with no data
2026-02-22 22:27:36,220 - python_multipart.multipart - DEBUG - Calling on_end with no data
2026-02-22 22:27:36,224 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dca40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser2',))
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dca40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser2',)) completed
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dca40>)
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dca40>) completed
2026-02-22 22:27:36,225 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dca40>)
2026-02-22 22:27:36,226 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dca40>) completed
2026-02-22 22:27:36,226 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,226 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd140>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser2',))
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd140>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser2',)) completed
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd140>)
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd140>) completed
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd140>)
2026-02-22 22:27:36,227 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd140>) completed
2026-02-22 22:27:36,356 - httpx - INFO - HTTP Request: POST http://test/api/v1/auth/login/access-token "HTTP/1.1 200 OK"
------------------------------ Captured log setup ------------------------------
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    aiosqlite:core.py:62 executing <function connect.<locals>.connector at 0x7612bf0f1440>
DEBUG    aiosqlite:core.py:67 operation <function connect.<locals>.connector at 0x7612bf0f1440> completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x7612bf225d00>, deterministic=True)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x7612bf225d00>, deterministic=True) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'floor', 1, <built-in function floor>, deterministic=True)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x7612bf0cb3d0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112c40>, 'PRAGMA read_uncommitted', [])
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112c40>, 'PRAGMA read_uncommitted', []) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112c40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112c40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112c40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112c40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112b40>, 'PRAGMA main.table_info("users")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112b40>, 'PRAGMA main.table_info("users")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112b40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112b40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112b40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112b40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf111640>, 'PRAGMA temp.table_info("users")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf111640>, 'PRAGMA temp.table_info("users")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf111640>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf111640>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf111640>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf111640>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112d40>, 'PRAGMA main.table_info("conversations")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112d40>, 'PRAGMA main.table_info("conversations")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112d40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112d40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112d40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112d40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112dc0>, 'PRAGMA temp.table_info("conversations")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112dc0>, 'PRAGMA temp.table_info("conversations")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112dc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112dc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112dc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112dc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112ec0>, 'PRAGMA main.table_info("conversation_participants")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112ec0>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112ec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112ec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112ec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112ec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112f40>, 'PRAGMA temp.table_info("conversation_participants")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf112f40>, 'PRAGMA temp.table_info("conversation_participants")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112f40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf112f40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112f40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf112f40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113040>, 'PRAGMA main.table_info("messages")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113040>, 'PRAGMA main.table_info("messages")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1130c0>, 'PRAGMA temp.table_info("messages")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1130c0>, 'PRAGMA temp.table_info("messages")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1130c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1130c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1130c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1130c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1132c0>, 'PRAGMA main.table_info("users")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1132c0>, 'PRAGMA main.table_info("users")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1132c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1132c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1132c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1132c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113340>, 'PRAGMA temp.table_info("users")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113340>, 'PRAGMA temp.table_info("users")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113340>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113340>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113340>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113340>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113440>, 'PRAGMA main.table_info("conversations")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113440>, 'PRAGMA main.table_info("conversations")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113440>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113440>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1134c0>, 'PRAGMA temp.table_info("conversations")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1134c0>, 'PRAGMA temp.table_info("conversations")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1134c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1134c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1134c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1134c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1135c0>, 'PRAGMA main.table_info("conversation_participants")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1135c0>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1135c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1135c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1135c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1135c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113640>, 'PRAGMA temp.table_info("conversation_participants")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113640>, 'PRAGMA temp.table_info("conversation_participants")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113640>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113640>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113640>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113640>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1137c0>, 'PRAGMA main.table_info("messages")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1137c0>, 'PRAGMA main.table_info("messages")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1137c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1137c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1137c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1137c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1138c0>, 'PRAGMA temp.table_info("messages")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1138c0>, 'PRAGMA temp.table_info("messages")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1138c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf1138c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1138c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1138c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113140>, '\nCREATE TABLE users (\n\tid UUID NOT NULL, \n\temail VARCHAR NOT NULL, \n\tusername VARCHAR NOT NULL, \n\thashed_password VARCHAR NOT NULL, \n\tis_active BOOLEAN, \n\tis_superuser BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113140>, '\nCREATE TABLE users (\n\tid UUID NOT NULL, \n\temail VARCHAR NOT NULL, \n\tusername VARCHAR NOT NULL, \n\thashed_password VARCHAR NOT NULL, \n\tis_active BOOLEAN, \n\tis_superuser BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113140>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113140>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113740>, 'CREATE UNIQUE INDEX ix_users_username ON users (username)', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113740>, 'CREATE UNIQUE INDEX ix_users_username ON users (username)', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113740>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113740>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113940>, 'CREATE UNIQUE INDEX ix_users_email ON users (email)', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113940>, 'CREATE UNIQUE INDEX ix_users_email ON users (email)', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113940>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113940>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1133c0>, '\nCREATE TABLE conversations (\n\tid UUID NOT NULL, \n\ttitle VARCHAR, \n\tis_group BOOLEAN, \n\tis_archived BOOLEAN NOT NULL, \n\tcreator_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(creator_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf1133c0>, '\nCREATE TABLE conversations (\n\tid UUID NOT NULL, \n\ttitle VARCHAR, \n\tis_group BOOLEAN, \n\tis_archived BOOLEAN NOT NULL, \n\tcreator_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(creator_id) REFERENCES users (id) ON DELETE SET NULL\n)\n\n', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1133c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf1133c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113840>, '\nCREATE TABLE messages (\n\tid UUID NOT NULL, \n\tconversation_id UUID NOT NULL, \n\tsender_id UUID NOT NULL, \n\tcontent VARCHAR, \n\tmessage_type VARCHAR, \n\tmedia_url VARCHAR, \n\tis_deleted BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(sender_id) REFERENCES users (id) ON DELETE CASCADE\n)\n\n', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113840>, '\nCREATE TABLE messages (\n\tid UUID NOT NULL, \n\tconversation_id UUID NOT NULL, \n\tsender_id UUID NOT NULL, \n\tcontent VARCHAR, \n\tmessage_type VARCHAR, \n\tmedia_url VARCHAR, \n\tis_deleted BOOLEAN, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(sender_id) REFERENCES users (id) ON DELETE CASCADE\n)\n\n', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113840>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113840>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10bc0>, 'CREATE INDEX ix_messages_conversation_id_created_at_desc ON messages (conversation_id, created_at DESC)', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10bc0>, 'CREATE INDEX ix_messages_conversation_id_created_at_desc ON messages (conversation_id, created_at DESC)', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10bc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10bc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113540>, '\nCREATE TABLE conversation_participants (\n\tconversation_id UUID NOT NULL, \n\tuser_id UUID NOT NULL, \n\trole VARCHAR, \n\tis_active BOOLEAN NOT NULL, \n\tlast_seen_message_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (conversation_id, user_id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(last_seen_message_id) REFERENCES messages (id) ON DELETE SET NULL\n)\n\n', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113540>, '\nCREATE TABLE conversation_participants (\n\tconversation_id UUID NOT NULL, \n\tuser_id UUID NOT NULL, \n\trole VARCHAR, \n\tis_active BOOLEAN NOT NULL, \n\tlast_seen_message_id UUID, \n\tcreated_at DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (conversation_id, user_id), \n\tFOREIGN KEY(conversation_id) REFERENCES conversations (id) ON DELETE CASCADE, \n\tFOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, \n\tFOREIGN KEY(last_seen_message_id) REFERENCES messages (id) ON DELETE SET NULL\n)\n\n', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113540>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113540>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    asyncio:selector_events.py:64 Using selector: EpollSelector
DEBUG    passlib.handlers.argon2:argon2.py:715 detected 'argon2_cffi' backend, version '25.1.0', with support for 0x13 argon2 hashes
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10440>, 'INSERT INTO users (id, email, username, hashed_password, is_active, is_superuser, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?) RETURNING created_at, id', ('6d946ca0db1b4cf28b18fc9ef869465d', 'test1@example.com', 'testuser1', '$argon2id$v=19$m=65536,t=3,p=4$c06pFQKAsPYeI0QI4VzLmQ$65YDaTkFKIlRa55VLxIyRzJShM0EGOSNh8TfZk6H/DA', 1, 0, None, '039d85ea818e4eec913cd09ac5e818fa', 'test2@example.com', 'testuser2', '$argon2id$v=19$m=65536,t=3,p=4$ybmXsjaGkNI657zXWqsV4g$jnsWU+3OlIKag0JyBsP+8JSmf0DpOfSpkh5w8ndwCWY', 1, 0, None))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee10440>, 'INSERT INTO users (id, email, username, hashed_password, is_active, is_superuser, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?, ?) RETURNING created_at, id', ('6d946ca0db1b4cf28b18fc9ef869465d', 'test1@example.com', 'testuser1', '$argon2id$v=19$m=65536,t=3,p=4$c06pFQKAsPYeI0QI4VzLmQ$65YDaTkFKIlRa55VLxIyRzJShM0EGOSNh8TfZk6H/DA', 1, 0, None, '039d85ea818e4eec913cd09ac5e818fa', 'test2@example.com', 'testuser2', '$argon2id$v=19$m=65536,t=3,p=4$ybmXsjaGkNI657zXWqsV4g$jnsWU+3OlIKag0JyBsP+8JSmf0DpOfSpkh5w8ndwCWY', 1, 0, None)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee10440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee10440>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee10440>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_start with no data
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_name with data[0:8]
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_data with data[9:18]
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_end with no data
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_start with no data
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_name with data[19:27]
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_data with data[28:32]
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_end with no data
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_end with no data
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee782c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser1',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee782c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser1',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee782c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee782c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee782c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee782c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee78bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser1',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee78bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser1',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee78bc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee78bc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee78bc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee78bc0>) completed
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/auth/login/access-token "HTTP/1.1 200 OK"
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_start with no data
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_name with data[0:8]
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_data with data[9:18]
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_end with no data
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_start with no data
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_name with data[19:27]
DEBUG    python_multipart.multipart:multipart.py:626 Calling on_field_data with data[28:32]
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_field_end with no data
DEBUG    python_multipart.multipart:multipart.py:629 Calling on_end with no data
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dca40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser2',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dca40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.email = ?', ('testuser2',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dca40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dca40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dca40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dca40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd140>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser2',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd140>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.username = ?', ('testuser2',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd140>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd140>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd140>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd140>) completed
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/auth/login/access-token "HTTP/1.1 200 OK"
----------------------------- Captured stdout call -----------------------------
2026-02-22 22:27:36,362 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,362 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,362 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee79e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
2026-02-22 22:27:36,362 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee79e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
2026-02-22 22:27:36,362 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee79e40>)
2026-02-22 22:27:36,363 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee79e40>) completed
2026-02-22 22:27:36,363 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee79e40>)
2026-02-22 22:27:36,363 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee79e40>) completed
2026-02-22 22:27:36,366 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,366 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,366 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dccc0>, 'INSERT INTO conversations (id, title, is_group, is_archived, creator_id, updated_at) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at', ('06398725fa624721a218d6a1dc0d4460', 'Test Chat', 0, 0, '6d946ca0db1b4cf28b18fc9ef869465d', None))
2026-02-22 22:27:36,367 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dccc0>, 'INSERT INTO conversations (id, title, is_group, is_archived, creator_id, updated_at) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at', ('06398725fa624721a218d6a1dc0d4460', 'Test Chat', 0, 0, '6d946ca0db1b4cf28b18fc9ef869465d', None)) completed
2026-02-22 22:27:36,367 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dccc0>)
2026-02-22 22:27:36,367 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dccc0>) completed
2026-02-22 22:27:36,367 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dccc0>)
2026-02-22 22:27:36,367 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dccc0>) completed
2026-02-22 22:27:36,370 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,370 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,370 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113a40>, 'INSERT INTO conversation_participants (conversation_id, user_id, role, is_active, last_seen_message_id, updated_at) VALUES (?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?) RETURNING created_at, conversation_id, user_id', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'admin', 1, None, None, '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa', 'member', 1, None, None))
2026-02-22 22:27:36,371 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113a40>, 'INSERT INTO conversation_participants (conversation_id, user_id, role, is_active, last_seen_message_id, updated_at) VALUES (?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?) RETURNING created_at, conversation_id, user_id', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'admin', 1, None, None, '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa', 'member', 1, None, None)) completed
2026-02-22 22:27:36,371 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113a40>)
2026-02-22 22:27:36,371 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113a40>) completed
2026-02-22 22:27:36,371 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113a40>)
2026-02-22 22:27:36,372 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113a40>) completed
2026-02-22 22:27:36,372 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,417 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,417 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,417 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,420 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de440>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de440>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,421 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4de440>)
2026-02-22 22:27:36,421 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4de440>) completed
2026-02-22 22:27:36,422 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de440>)
2026-02-22 22:27:36,422 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de440>) completed
2026-02-22 22:27:36,423 - httpx - INFO - HTTP Request: POST http://test/api/v1/conversations/ "HTTP/1.1 201 Created"
2026-02-22 22:27:36,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,428 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,428 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
2026-02-22 22:27:36,429 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
2026-02-22 22:27:36,430 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deec0>)
2026-02-22 22:27:36,430 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deec0>) completed
2026-02-22 22:27:36,430 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deec0>)
2026-02-22 22:27:36,430 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deec0>) completed
2026-02-22 22:27:36,433 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,433 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,433 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dcd40>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,433 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dcd40>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,434 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dcd40>)
2026-02-22 22:27:36,434 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dcd40>) completed
2026-02-22 22:27:36,434 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dcd40>)
2026-02-22 22:27:36,434 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dcd40>) completed
2026-02-22 22:27:36,436 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,436 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,437 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deac0>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d'))
2026-02-22 22:27:36,437 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deac0>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d')) completed
2026-02-22 22:27:36,437 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deac0>)
2026-02-22 22:27:36,437 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deac0>) completed
2026-02-22 22:27:36,438 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deac0>)
2026-02-22 22:27:36,438 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deac0>) completed
2026-02-22 22:27:36,439 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,440 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,440 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4df940>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,441 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4df940>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,441 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4df940>)
2026-02-22 22:27:36,442 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4df940>) completed
2026-02-22 22:27:36,442 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4df940>)
2026-02-22 22:27:36,442 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4df940>) completed
2026-02-22 22:27:36,448 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,448 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,449 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfac0>, 'UPDATE conversations SET updated_at=CURRENT_TIMESTAMP WHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,450 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfac0>, 'UPDATE conversations SET updated_at=CURRENT_TIMESTAMP WHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,450 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfac0>)
2026-02-22 22:27:36,450 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfac0>) completed
2026-02-22 22:27:36,452 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,452 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,452 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddd40>, 'INSERT INTO messages (id, conversation_id, sender_id, content, message_type, media_url, is_deleted, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING created_at', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'Hello User 2!', 'text', None, 0, None))
2026-02-22 22:27:36,453 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddd40>, 'INSERT INTO messages (id, conversation_id, sender_id, content, message_type, media_url, is_deleted, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING created_at', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'Hello User 2!', 'text', None, 0, None)) completed
2026-02-22 22:27:36,453 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddd40>)
2026-02-22 22:27:36,453 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddd40>) completed
2026-02-22 22:27:36,453 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddd40>)
2026-02-22 22:27:36,453 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddd40>) completed
2026-02-22 22:27:36,454 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,496 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,496 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,496 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,499 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,500 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,500 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfcc0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
2026-02-22 22:27:36,500 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfcc0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
2026-02-22 22:27:36,500 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dfcc0>)
2026-02-22 22:27:36,501 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dfcc0>) completed
2026-02-22 22:27:36,501 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfcc0>)
2026-02-22 22:27:36,501 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfcc0>) completed
2026-02-22 22:27:36,502 - chat_api - ERROR - Failed to publish message event: 'NoneType' object has no attribute 'publish'
2026-02-22 22:27:36,503 - httpx - INFO - HTTP Request: POST http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages "HTTP/1.1 201 Created"
2026-02-22 22:27:36,507 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,507 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,507 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
2026-02-22 22:27:36,508 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
2026-02-22 22:27:36,508 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519e40>)
2026-02-22 22:27:36,508 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519e40>) completed
2026-02-22 22:27:36,509 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519e40>)
2026-02-22 22:27:36,509 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519e40>) completed
2026-02-22 22:27:36,512 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,513 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,513 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51ad40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
2026-02-22 22:27:36,513 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51ad40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
2026-02-22 22:27:36,513 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51ad40>)
2026-02-22 22:27:36,513 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51ad40>) completed
2026-02-22 22:27:36,514 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51ad40>)
2026-02-22 22:27:36,514 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51ad40>) completed
2026-02-22 22:27:36,517 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,518 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,518 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddf40>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.conversation_id = ? AND messages.is_deleted = 0 ORDER BY messages.created_at DESC\n LIMIT ? OFFSET ?', ('06398725fa624721a218d6a1dc0d4460', 20, 0))
2026-02-22 22:27:36,518 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddf40>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.conversation_id = ? AND messages.is_deleted = 0 ORDER BY messages.created_at DESC\n LIMIT ? OFFSET ?', ('06398725fa624721a218d6a1dc0d4460', 20, 0)) completed
2026-02-22 22:27:36,518 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddf40>)
2026-02-22 22:27:36,519 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddf40>) completed
2026-02-22 22:27:36,519 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddf40>)
2026-02-22 22:27:36,519 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddf40>) completed
2026-02-22 22:27:36,520 - httpx - INFO - HTTP Request: GET http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages "HTTP/1.1 200 OK"
2026-02-22 22:27:36,524 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,524 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,524 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
2026-02-22 22:27:36,525 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
2026-02-22 22:27:36,525 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51aec0>)
2026-02-22 22:27:36,525 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51aec0>) completed
2026-02-22 22:27:36,525 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aec0>)
2026-02-22 22:27:36,525 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aec0>) completed
2026-02-22 22:27:36,530 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,530 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,530 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b840>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0))
2026-02-22 22:27:36,531 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b840>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0)) completed
2026-02-22 22:27:36,531 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b840>)
2026-02-22 22:27:36,531 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b840>) completed
2026-02-22 22:27:36,531 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b840>)
2026-02-22 22:27:36,531 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b840>) completed
2026-02-22 22:27:36,535 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,535 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,535 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd3c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,535 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd3c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,536 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd3c0>)
2026-02-22 22:27:36,536 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd3c0>) completed
2026-02-22 22:27:36,536 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd3c0>)
2026-02-22 22:27:36,536 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd3c0>) completed
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569040>)
2026-02-22 22:27:36,538 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569040>) completed
2026-02-22 22:27:36,539 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569040>)
2026-02-22 22:27:36,539 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569040>) completed
2026-02-22 22:27:36,542 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,542 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,542 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b0c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,542 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b0c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,542 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b0c0>)
2026-02-22 22:27:36,543 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b0c0>) completed
2026-02-22 22:27:36,543 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b0c0>)
2026-02-22 22:27:36,543 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b0c0>) completed
2026-02-22 22:27:36,544 - httpx - INFO - HTTP Request: GET http://test/api/v1/conversations/ "HTTP/1.1 200 OK"
2026-02-22 22:27:36,547 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,548 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,548 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
2026-02-22 22:27:36,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
2026-02-22 22:27:36,549 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519bc0>)
2026-02-22 22:27:36,549 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519bc0>) completed
2026-02-22 22:27:36,550 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519bc0>)
2026-02-22 22:27:36,550 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519bc0>) completed
2026-02-22 22:27:36,551 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,552 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,552 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568a40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
2026-02-22 22:27:36,552 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568a40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
2026-02-22 22:27:36,553 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568a40>)
2026-02-22 22:27:36,553 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568a40>) completed
2026-02-22 22:27:36,553 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568a40>)
2026-02-22 22:27:36,553 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568a40>) completed
2026-02-22 22:27:36,555 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,556 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,556 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aac0>, 'UPDATE conversation_participants SET last_seen_message_id=?, updated_at=CURRENT_TIMESTAMP WHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
2026-02-22 22:27:36,557 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aac0>, 'UPDATE conversation_participants SET last_seen_message_id=?, updated_at=CURRENT_TIMESTAMP WHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
2026-02-22 22:27:36,557 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aac0>)
2026-02-22 22:27:36,557 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aac0>) completed
2026-02-22 22:27:36,558 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,597 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,598 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,599 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,600 - httpx - INFO - HTTP Request: PUT http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages/read "HTTP/1.1 200 OK"
2026-02-22 22:27:36,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,604 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,604 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5699c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
2026-02-22 22:27:36,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5699c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
2026-02-22 22:27:36,605 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5699c0>)
2026-02-22 22:27:36,605 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5699c0>) completed
2026-02-22 22:27:36,606 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5699c0>)
2026-02-22 22:27:36,606 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5699c0>) completed
2026-02-22 22:27:36,608 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,609 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,609 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5690c0>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0))
2026-02-22 22:27:36,610 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5690c0>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0)) completed
2026-02-22 22:27:36,611 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5690c0>)
2026-02-22 22:27:36,611 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5690c0>) completed
2026-02-22 22:27:36,611 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5690c0>)
2026-02-22 22:27:36,612 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5690c0>) completed
2026-02-22 22:27:36,614 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,614 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,614 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a4c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,615 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a4c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,615 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a4c0>)
2026-02-22 22:27:36,615 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a4c0>) completed
2026-02-22 22:27:36,616 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a4c0>)
2026-02-22 22:27:36,616 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a4c0>) completed
2026-02-22 22:27:36,618 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,618 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,618 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
2026-02-22 22:27:36,618 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
2026-02-22 22:27:36,618 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568040>)
2026-02-22 22:27:36,619 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568040>) completed
2026-02-22 22:27:36,619 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568040>)
2026-02-22 22:27:36,619 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568040>) completed
2026-02-22 22:27:36,621 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,621 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,621 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a5c0>, 'SELECT messages.created_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
2026-02-22 22:27:36,622 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a5c0>, 'SELECT messages.created_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
2026-02-22 22:27:36,624 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a5c0>)
2026-02-22 22:27:36,624 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a5c0>) completed
2026-02-22 22:27:36,624 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a5c0>)
2026-02-22 22:27:36,624 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a5c0>) completed
2026-02-22 22:27:36,627 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,627 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,628 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a3c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ? AND messages.created_at > ?', ('06398725fa624721a218d6a1dc0d4460', '2026-02-22 16:57:36.000000'))
2026-02-22 22:27:36,628 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a3c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ? AND messages.created_at > ?', ('06398725fa624721a218d6a1dc0d4460', '2026-02-22 16:57:36.000000')) completed
2026-02-22 22:27:36,629 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a3c0>)
2026-02-22 22:27:36,629 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a3c0>) completed
2026-02-22 22:27:36,629 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a3c0>)
2026-02-22 22:27:36,630 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a3c0>) completed
2026-02-22 22:27:36,631 - httpx - INFO - HTTP Request: GET http://test/api/v1/conversations/ "HTTP/1.1 200 OK"
2026-02-22 22:27:36,636 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,636 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,636 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a040>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
2026-02-22 22:27:36,637 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a040>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
2026-02-22 22:27:36,637 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a040>)
2026-02-22 22:27:36,637 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a040>) completed
2026-02-22 22:27:36,637 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a040>)
2026-02-22 22:27:36,638 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a040>) completed
2026-02-22 22:27:36,640 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,640 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,641 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd9c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
2026-02-22 22:27:36,641 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd9c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
2026-02-22 22:27:36,642 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd9c0>)
2026-02-22 22:27:36,642 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd9c0>) completed
2026-02-22 22:27:36,642 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd9c0>)
2026-02-22 22:27:36,643 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd9c0>) completed
2026-02-22 22:27:36,644 - httpx - INFO - HTTP Request: DELETE http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages/d8efed0d-054c-4c77-9c99-c8720c5bac00 "HTTP/1.1 403 Forbidden"
2026-02-22 22:27:36,648 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,649 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,649 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56abc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
2026-02-22 22:27:36,649 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56abc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
2026-02-22 22:27:36,650 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56abc0>)
2026-02-22 22:27:36,650 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56abc0>) completed
2026-02-22 22:27:36,650 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56abc0>)
2026-02-22 22:27:36,650 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56abc0>) completed
2026-02-22 22:27:36,651 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,652 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,652 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56b4c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
2026-02-22 22:27:36,652 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56b4c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
2026-02-22 22:27:36,652 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56b4c0>)
2026-02-22 22:27:36,653 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56b4c0>) completed
2026-02-22 22:27:36,653 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56b4c0>)
2026-02-22 22:27:36,653 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56b4c0>) completed
2026-02-22 22:27:36,654 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,655 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,655 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de540>, 'UPDATE messages SET is_deleted=?, updated_at=CURRENT_TIMESTAMP WHERE messages.id = ?', (1, 'd8efed0d054c4c779c99c8720c5bac00'))
2026-02-22 22:27:36,655 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de540>, 'UPDATE messages SET is_deleted=?, updated_at=CURRENT_TIMESTAMP WHERE messages.id = ?', (1, 'd8efed0d054c4c779c99c8720c5bac00')) completed
2026-02-22 22:27:36,655 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de540>)
2026-02-22 22:27:36,656 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de540>) completed
2026-02-22 22:27:36,656 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,698 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,698 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,699 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,701 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,701 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,702 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569ac0>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
2026-02-22 22:27:36,702 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569ac0>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
2026-02-22 22:27:36,702 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569ac0>)
2026-02-22 22:27:36,702 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569ac0>) completed
2026-02-22 22:27:36,703 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569ac0>)
2026-02-22 22:27:36,703 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569ac0>) completed
------------------------------ Captured log call -------------------------------
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee79e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee79e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee79e40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bee79e40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee79e40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee79e40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dccc0>, 'INSERT INTO conversations (id, title, is_group, is_archived, creator_id, updated_at) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at', ('06398725fa624721a218d6a1dc0d4460', 'Test Chat', 0, 0, '6d946ca0db1b4cf28b18fc9ef869465d', None))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dccc0>, 'INSERT INTO conversations (id, title, is_group, is_archived, creator_id, updated_at) VALUES (?, ?, ?, ?, ?, ?) RETURNING created_at', ('06398725fa624721a218d6a1dc0d4460', 'Test Chat', 0, 0, '6d946ca0db1b4cf28b18fc9ef869465d', None)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dccc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dccc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dccc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dccc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113a40>, 'INSERT INTO conversation_participants (conversation_id, user_id, role, is_active, last_seen_message_id, updated_at) VALUES (?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?) RETURNING created_at, conversation_id, user_id', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'admin', 1, None, None, '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa', 'member', 1, None, None))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bf113a40>, 'INSERT INTO conversation_participants (conversation_id, user_id, role, is_active, last_seen_message_id, updated_at) VALUES (?, ?, ?, ?, ?, ?), (?, ?, ?, ?, ?, ?) RETURNING created_at, conversation_id, user_id', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'admin', 1, None, None, '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa', 'member', 1, None, None)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113a40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bf113a40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113a40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bf113a40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de440>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de440>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4de440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4de440>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de440>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de440>) completed
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/conversations/ "HTTP/1.1 201 Created"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dcd40>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dcd40>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations \nWHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dcd40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dcd40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dcd40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dcd40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deac0>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4deac0>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4deac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4deac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4df940>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4df940>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4df940>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4df940>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4df940>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4df940>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfac0>, 'UPDATE conversations SET updated_at=CURRENT_TIMESTAMP WHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfac0>, 'UPDATE conversations SET updated_at=CURRENT_TIMESTAMP WHERE conversations.id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddd40>, 'INSERT INTO messages (id, conversation_id, sender_id, content, message_type, media_url, is_deleted, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING created_at', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'Hello User 2!', 'text', None, 0, None))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddd40>, 'INSERT INTO messages (id, conversation_id, sender_id, content, message_type, media_url, is_deleted, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?) RETURNING created_at', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '6d946ca0db1b4cf28b18fc9ef869465d', 'Hello User 2!', 'text', None, 0, None)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddd40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddd40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddd40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddd40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfcc0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dfcc0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dfcc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dfcc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfcc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dfcc0>) completed
ERROR    chat_api:service.py:62 Failed to publish message event: 'NoneType' object has no attribute 'publish'
INFO     httpx:_client.py:1740 HTTP Request: POST http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages "HTTP/1.1 201 Created"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519e40>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519e40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519e40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519e40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519e40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51ad40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51ad40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51ad40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51ad40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51ad40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51ad40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddf40>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.conversation_id = ? AND messages.is_deleted = 0 ORDER BY messages.created_at DESC\n LIMIT ? OFFSET ?', ('06398725fa624721a218d6a1dc0d4460', 20, 0))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4ddf40>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.conversation_id = ? AND messages.is_deleted = 0 ORDER BY messages.created_at DESC\n LIMIT ? OFFSET ?', ('06398725fa624721a218d6a1dc0d4460', 20, 0)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddf40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4ddf40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddf40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4ddf40>) completed
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages "HTTP/1.1 200 OK"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aec0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51aec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51aec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b840>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b840>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b840>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b840>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b840>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b840>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd3c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd3c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd3c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd3c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd3c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd3c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b0c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51b0c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b0c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc51b0c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b0c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51b0c0>) completed
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/conversations/ "HTTP/1.1 200 OK"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc519bc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519bc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc519bc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519bc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc519bc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568a40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568a40>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568a40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568a40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568a40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568a40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aac0>, 'UPDATE conversation_participants SET last_seen_message_id=?, updated_at=CURRENT_TIMESTAMP WHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc51aac0>, 'UPDATE conversation_participants SET last_seen_message_id=?, updated_at=CURRENT_TIMESTAMP WHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('d8efed0d054c4c779c99c8720c5bac00', '06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc51aac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
INFO     httpx:_client.py:1740 HTTP Request: PUT http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages/read "HTTP/1.1 200 OK"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5699c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5699c0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5699c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5699c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5699c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5699c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5690c0>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc5690c0>, 'SELECT conversations.id, conversations.title, conversations.is_group, conversations.is_archived, conversations.creator_id, conversations.created_at, conversations.updated_at \nFROM conversations JOIN conversation_participants ON conversations.id = conversation_participants.conversation_id \nWHERE conversation_participants.user_id = ? AND conversation_participants.is_active = 1 ORDER BY conversations.updated_at DESC\n LIMIT ? OFFSET ?', ('039d85ea818e4eec913cd09ac5e818fa', 100, 0)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5690c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc5690c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5690c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc5690c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a4c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a4c0>, 'SELECT conversation_participants.conversation_id AS conversation_participants_conversation_id, conversation_participants.user_id AS conversation_participants_user_id, conversation_participants.role AS conversation_participants_role, conversation_participants.is_active AS conversation_participants_is_active, conversation_participants.last_seen_message_id AS conversation_participants_last_seen_message_id, conversation_participants.created_at AS conversation_participants_created_at, conversation_participants.updated_at AS conversation_participants_updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id IN (?)', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a4c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a4c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a4c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a4c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc568040>, 'SELECT conversation_participants.conversation_id, conversation_participants.user_id, conversation_participants.role, conversation_participants.is_active, conversation_participants.last_seen_message_id, conversation_participants.created_at, conversation_participants.updated_at \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ? AND conversation_participants.user_id = ?', ('06398725fa624721a218d6a1dc0d4460', '039d85ea818e4eec913cd09ac5e818fa')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc568040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc568040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a5c0>, 'SELECT messages.created_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a5c0>, 'SELECT messages.created_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a5c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a5c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a5c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a5c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a3c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ? AND messages.created_at > ?', ('06398725fa624721a218d6a1dc0d4460', '2026-02-22 16:57:36.000000'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a3c0>, 'SELECT count(messages.id) AS count_1 \nFROM messages \nWHERE messages.conversation_id = ? AND messages.created_at > ?', ('06398725fa624721a218d6a1dc0d4460', '2026-02-22 16:57:36.000000')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a3c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a3c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a3c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a3c0>) completed
INFO     httpx:_client.py:1740 HTTP Request: GET http://test/api/v1/conversations/ "HTTP/1.1 200 OK"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a040>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56a040>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('039d85ea818e4eec913cd09ac5e818fa',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56a040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a040>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56a040>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd9c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4dd9c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd9c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc4dd9c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd9c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4dd9c0>) completed
INFO     httpx:_client.py:1740 HTTP Request: DELETE http://test/api/v1/conversations/06398725-fa62-4721-a218-d6a1dc0d4460/messages/d8efed0d-054c-4c77-9c99-c8720c5bac00 "HTTP/1.1 403 Forbidden"
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56abc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56abc0>, 'SELECT users.id, users.email, users.username, users.hashed_password, users.is_active, users.is_superuser, users.created_at, users.updated_at \nFROM users \nWHERE users.id = ?', ('6d946ca0db1b4cf28b18fc9ef869465d',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56abc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56abc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56abc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56abc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56b4c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc56b4c0>, 'SELECT messages.id, messages.conversation_id, messages.sender_id, messages.content, messages.message_type, messages.media_url, messages.is_deleted, messages.created_at, messages.updated_at \nFROM messages \nWHERE messages.id = ?', ('d8efed0d054c4c779c99c8720c5bac00',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56b4c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc56b4c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56b4c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc56b4c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de540>, 'UPDATE messages SET is_deleted=?, updated_at=CURRENT_TIMESTAMP WHERE messages.id = ?', (1, 'd8efed0d054c4c779c99c8720c5bac00'))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc4de540>, 'UPDATE messages SET is_deleted=?, updated_at=CURRENT_TIMESTAMP WHERE messages.id = ?', (1, 'd8efed0d054c4c779c99c8720c5bac00')) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de540>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc4de540>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569ac0>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',))
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc569ac0>, 'SELECT conversation_participants.user_id \nFROM conversation_participants \nWHERE conversation_participants.conversation_id = ?', ('06398725fa624721a218d6a1dc0d4460',)) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569ac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc569ac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569ac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc569ac0>) completed
--------------------------- Captured stdout teardown ---------------------------
2026-02-22 22:27:36,725 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,726 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,727 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,728 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,729 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,729 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,729 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc1539c0>, 'PRAGMA main.table_info("users")', ())
2026-02-22 22:27:36,729 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc1539c0>, 'PRAGMA main.table_info("users")', ()) completed
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc1539c0>)
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc1539c0>) completed
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc1539c0>)
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc1539c0>) completed
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,730 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153cc0>, 'PRAGMA main.table_info("conversations")', ())
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153cc0>, 'PRAGMA main.table_info("conversations")', ()) completed
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153cc0>)
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153cc0>) completed
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153cc0>)
2026-02-22 22:27:36,731 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153cc0>) completed
2026-02-22 22:27:36,732 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,732 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,732 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153b40>, 'PRAGMA main.table_info("conversation_participants")', ())
2026-02-22 22:27:36,733 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153b40>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
2026-02-22 22:27:36,733 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153b40>)
2026-02-22 22:27:36,733 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153b40>) completed
2026-02-22 22:27:36,733 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153b40>)
2026-02-22 22:27:36,733 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153b40>) completed
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153d40>, 'PRAGMA main.table_info("messages")', ())
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153d40>, 'PRAGMA main.table_info("messages")', ()) completed
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153d40>)
2026-02-22 22:27:36,734 - aiosqlite - DEBUG - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153d40>) completed
2026-02-22 22:27:36,735 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153d40>)
2026-02-22 22:27:36,735 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153d40>) completed
2026-02-22 22:27:36,735 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,736 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,736 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee11ec0>, '\nDROP TABLE conversation_participants', ())
2026-02-22 22:27:36,810 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee11ec0>, '\nDROP TABLE conversation_participants', ()) completed
2026-02-22 22:27:36,810 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee11ec0>)
2026-02-22 22:27:36,811 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee11ec0>) completed
2026-02-22 22:27:36,812 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,812 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,812 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153f40>, '\nDROP TABLE messages', ())
2026-02-22 22:27:36,878 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153f40>, '\nDROP TABLE messages', ()) completed
2026-02-22 22:27:36,878 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153f40>)
2026-02-22 22:27:36,878 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153f40>) completed
2026-02-22 22:27:36,879 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,879 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,880 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153dc0>, '\nDROP TABLE conversations', ())
2026-02-22 22:27:36,923 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153dc0>, '\nDROP TABLE conversations', ()) completed
2026-02-22 22:27:36,924 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153dc0>)
2026-02-22 22:27:36,924 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153dc0>) completed
2026-02-22 22:27:36,925 - aiosqlite - DEBUG - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,925 - aiosqlite - DEBUG - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,925 - aiosqlite - DEBUG - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153ac0>, '\nDROP TABLE users', ())
2026-02-22 22:27:36,969 - aiosqlite - DEBUG - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153ac0>, '\nDROP TABLE users', ()) completed
2026-02-22 22:27:36,969 - aiosqlite - DEBUG - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153ac0>)
2026-02-22 22:27:36,969 - aiosqlite - DEBUG - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153ac0>) completed
2026-02-22 22:27:36,970 - aiosqlite - DEBUG - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,970 - aiosqlite - DEBUG - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
2026-02-22 22:27:36,971 - aiosqlite - DEBUG - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
2026-02-22 22:27:36,971 - aiosqlite - DEBUG - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
---------------------------- Captured log teardown -----------------------------
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc1539c0>, 'PRAGMA main.table_info("users")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc1539c0>, 'PRAGMA main.table_info("users")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc1539c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc1539c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc1539c0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc1539c0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153cc0>, 'PRAGMA main.table_info("conversations")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153cc0>, 'PRAGMA main.table_info("conversations")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153cc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153cc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153cc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153cc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153b40>, 'PRAGMA main.table_info("conversation_participants")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153b40>, 'PRAGMA main.table_info("conversation_participants")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153b40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153b40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153b40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153b40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153d40>, 'PRAGMA main.table_info("messages")', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153d40>, 'PRAGMA main.table_info("messages")', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153d40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x7612bc153d40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153d40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153d40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee11ec0>, '\nDROP TABLE conversation_participants', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bee11ec0>, '\nDROP TABLE conversation_participants', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee11ec0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bee11ec0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153f40>, '\nDROP TABLE messages', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153f40>, '\nDROP TABLE messages', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153f40>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153f40>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153dc0>, '\nDROP TABLE conversations', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153dc0>, '\nDROP TABLE conversations', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153dc0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153dc0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153ac0>, '\nDROP TABLE users', ())
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x7612bc153ac0>, '\nDROP TABLE users', ()) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153ac0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x7612bc153ac0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
DEBUG    aiosqlite:core.py:62 executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>)
DEBUG    aiosqlite:core.py:67 operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x7612bf0cb3d0>) completed
=============================== warnings summary ===============================
src/core/config.py:5
  /home/aswin-ganga/headless-chat/src/core/config.py:5: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

src/database/base_class.py:6
  /home/aswin-ganga/headless-chat/src/database/base_class.py:6: MovedIn20Warning: The ``as_declarative()`` function is now available as sqlalchemy.orm.as_declarative() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    @as_declarative()

venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854
  /home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

src/schemas/user.py:24
  /home/aswin-ganga/headless-chat/src/schemas/user.py:24: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(UserBase):

src/schemas/conversation.py:25
  /home/aswin-ganga/headless-chat/src/schemas/conversation.py:25: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ConversationResponse(ConversationBase):

src/schemas/message.py:23
  /home/aswin-ganga/headless-chat/src/schemas/message.py:23: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class MessageResponse(MessageBase):

tests/test_messaging.py::test_conversation_flow_and_messaging
  /home/aswin-ganga/headless-chat/venv/lib/python3.12/site-packages/passlib/handlers/argon2.py:716: DeprecationWarning: Accessing argon2.__version__ is deprecated and will be removed in a future release. Use importlib.metadata directly to query for argon2-cffi's packaging metadata.
    _argon2_cffi.__version__, max_version)

tests/test_messaging.py::test_conversation_flow_and_messaging
tests/test_messaging.py::test_conversation_flow_and_messaging
  /home/aswin-ganga/headless-chat/src/modules/auth/basic_provider.py:63: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + expires_delta

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_messaging.py::test_conversation_flow_and_messaging - sqlalc...
======================== 1 failed, 9 warnings in 1.69s =========================
